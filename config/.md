#include "lvgl/lvgl.h"
#include "lv_drivers/display/fbdev.h"
#include "lv_drivers/indev/evdev.h"
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <fcntl.h>  
#include <errno.h>  
#include <stdint.h>
#include <string.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <unistd.h>
#include <unistd.h>
#include <pthread.h>
#include <time.h>
#include <sys/time.h>

#include "gui_comm.h"
#include "gui_data_comm.h"

#define DISP_BUF_SIZE (800 \* 480)

typedef struct {
uint16_t PIN_number; // PIN
uint8_t entropy[50]; // 熵数据
int entropy_Len; // 熵长度
int CreateWallet; //创建钱包标志位
char mnemonic[50]; //
int Inputallet; //导入钱包标志位
int data_ready; // 标志位，数据是否准备好
int writer_id; // 写入进程的 ID
} SharedData;

#define SHM_KEY 12345 // 共享内存键值

// 线程函数 1
void *thread_func1(void *arg) {
/_LittlevGL init_/
lv_init();

    /*Linux frame buffer device init*/
    fbdev_init();

    /*A small buffer for LittlevGL to draw the screen's content*/
    static lv_color_t buf[DISP_BUF_SIZE];

    /*Initialize a descriptor for the buffer*/
    static lv_disp_draw_buf_t disp_buf;
    lv_disp_draw_buf_init(&disp_buf, buf, NULL, DISP_BUF_SIZE);

    /*Initialize and register a display driver*/
    static lv_disp_drv_t disp_drv;
    lv_disp_drv_init(&disp_drv);
    disp_drv.draw_buf   = &disp_buf;
    disp_drv.flush_cb   = fbdev_flush;
    disp_drv.hor_res    = 800;
    disp_drv.ver_res    = 480;
    disp_drv.rotated    = LV_DISP_ROT_90;
    disp_drv.sw_rotate = 1;
    lv_disp_drv_register(&disp_drv);

    evdev_init();
    static lv_indev_drv_t indev_drv_1;
    lv_indev_drv_init(&indev_drv_1); /*Basic initialization*/
    indev_drv_1.type = LV_INDEV_TYPE_POINTER;

    /*This function will be called periodically (by the library) to get the mouse position and state*/
    indev_drv_1.read_cb = evdev_read;
    lv_
